<!DOCTYPE html>
<html class="no-js  page-8 app-E-DISTRICT-MANAGER-APPLICATION" lang="en">

<head>
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <meta charset="utf-8">
    <title>Service Request</title>
    <link rel="stylesheet" href="../assets/css/oj-redwood-notag-min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/Core-theme.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/theme.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/commonMenu.css" type="text/css">
    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/vendor/datatable/css/dataTables.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/vendor/datatable/dataTables.bootstrap5.min.css">
    <link href="../assets/vendor/toastr/toastr.min.css" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        #t_Body_nav {
            width: 100% !important;
        }
    </style>
</head>

<body
    class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions no-anim t-PageTemplate--standard   apex-side-nav apex-icons-fontapex apex-theme-vita-copy-1"
    id="t_PageBody">
    <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a>
    <form>
        <header class="t-Header" id="t_Header" role="banner">
            <div class="t-Header-branding">
                <div class="t-Header-controls">
                    <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree"
                        aria-label="Main Navigation" title="Main Navigation" id="t_Button_navControl"
                        type="button"><span class="t-Header-controlsIcon" aria-hidden="true"></span></button>
                </div>
                <div class="t-Header-logo">
                    <!-- <a href="&#x2F;ords&#x2F;r&#x2F;edmdev&#x2F;e-district-manager-application&#x2F;home?session=113837303316044" class="t-Header-logo-link"><span class="apex-logo-text">e-District Manager Portal</span></a>-->
                    <!-- <a href="&#x2F;ords&#x2F;r&#x2F;edmdev&#x2F;e-district-manager-application&#x2F;home?session=113837303316044" class="t-Header-logo-link">Toll Free Support : +91 9042370430</a>-->
                    <P class="t-Header-logo-link">TNEGA</P>
                </div>
                <div class="t-Header-navBar">
                    <div class="t-Header-navBar--start"></div>
                    <div id="globalHeader"></div>
                    <div class="t-Header-navBar--end"></div>
                </div>
            </div>
            <div class="t-Header-nav"></div>
        </header>
        <div class="t-Body">
            <div class="t-Body-nav" id="t_Body_nav" role="navigation" aria-label="Application">
                <div class="a-TreeView t-TreeNav js-addActions js-defaultCollapsed js-navCollapsed--hidden t-TreeNav--classic"
                    id="t_TreeNav" data-id="8_tree" aria-label="Main Navigation">
                    <ul id="commonMenuContainer"></ul>
                </div>
            </div>

            <div class="t-Body-main">
                <div class="t-Body-title" id="t_Body_title"></div>
                <div class="t-Body-content" id="t_Body_content">
                    <main id="main" class="t-Body-mainContent">
                        <span id="APEX_SUCCESS_MESSAGE" data-template-id="13879136713391167_S"
                            class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE"
                            data-template-id="13879136713391167_E" class="apex-page-error u-hidden"></span>
                        <div class="t-Body-fullContent font-small">
                            <div class="container-fluid">
                                <div class="container mt-4 " style="background-color: #fcfcfc;">
                                    <!-- Tabs -->
                                    <ul class="nav nav-tabs" id="instructionTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active open_tab_class" id="open-tab"
                                                data-bs-toggle="tab" data-bs-target="#open" type="button" role="tab"
                                                aria-controls="open" aria-selected="true">Overall eSevai Operator Change
                                                Request Report</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link closed_tab_class" id="closed-tab"
                                                data-bs-toggle="tab" data-bs-target="#closed" type="button" role="tab"
                                                aria-controls="closed" aria-selected="false">eSevai Operator Approved
                                                Request</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link reject_tab_class" id="reject-tab"
                                                data-bs-toggle="tab" data-bs-target="#reject" type="button" role="tab"
                                                aria-controls="reject" aria-selected="false">eSevai Operator Reject
                                                Request</button>
                                        </li>
                                    </ul>
                                    <div>

                                    </div>
                                    <!-- Tab Content -->
                                    <div class="tab-content" id="instructionTabsContent">
                                        <!-- Open Tab -->
                                        <div class="tab-pane fade show active" id="open" role="tabpanel"
                                            aria-labelledby="open-tab">
                                            <div class="col col-12 text-end mt-3">
                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--success t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_change_operator_mulsel_fn"
                                                    data-success="Operator Changed Successfully" id="changeOperatorBtn"
                                                    type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-thumbs-o-up fa-anim-flash"></i>Change
                                                    Operator
                                                </button>

                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--danger t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_reject_mulsel_fn"
                                                    data-success="Operator Rejected successfully."
                                                    id="rejectOperatorBtn" type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-times-circle-o fa-anim-flash"></i>Reject
                                                    Operator
                                                </button>

                                            </div>
                                            <div class="table-responsive mt-3">
                                                <table id="pressReleaseTable" class="display" style="width:100%">
                                                    <thead>
                                                        <tr>
                                                            <th><input type="checkbox"
                                                                    id="pressReleaseTable_select_all"></th>
                                                            <th>Created Date</th>
                                                            <th>District</th>
                                                            <th>ESevai Id</th>
                                                            <th>Current Operator Name</th>
                                                            <th>Current Operator Mobile Number</th>
                                                            <th>Current Mail Id</th>
                                                            <th>Reason for Operator Change</th>
                                                            <th>New Operator Name</th>
                                                            <th>New Operator Aadhar Number</th>
                                                            <th>New Operator Phone number</th>
                                                            <th>New Mail Id</th>
                                                            <th>Photo Attachment</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <!-- Closed Tab -->
                                        <div class="tab-pane fade" id="closed" role="tabpanel"
                                            aria-labelledby="closed-tab">
                                            <div class="col col-12 text-end mt-3">
                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--success t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_cls_rqst_mulsel_fn"
                                                    data-success="Request Closed Successfully" id="closeRequest"
                                                    type="button">
                                                    <i class="t-Icon t-Icon--left fa fa-thumbs-o-up fa-anim-flash"></i>
                                                    Close Request
                                                </button>

                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--warning t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_back_to_rpt_mulsel_fn"
                                                    data-success="Report Status Changed Successfully"
                                                    id="backToReportBtn" type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-arrow-circle-o-left fa-anim-flash"></i>Back
                                                    To
                                                    Report
                                                </button>
                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--danger t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_reject_mulsel_fn"
                                                    data-success="Report Status Changed Successfully"
                                                    id="rejectReportBtn" type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-times-circle-o fa-anim-flash"></i>Reject
                                                    Report
                                                </button>

                                            </div>
                                            <div class="table-responsive mt-3">
                                                <table id="closedReport" class="display" style="width:100%">
                                                    <thead>
                                                        <tr>
                                                            <th><input type="checkbox"
                                                                    id="pressReleaseTable_select_all"></th>
                                                            <th>Created Date</th>
                                                            <th>District</th>
                                                            <th>ESevai Id</th>
                                                            <th>Current Operator Name</th>
                                                            <th>Current Operator Mobile Number</th>
                                                            <th>Current Mail Id</th>
                                                            <th>Reason for Operator Change</th>
                                                            <th>New Operator Name</th>
                                                            <th>New Operator Aadhar Number</th>
                                                            <th>New Operator Phone number</th>
                                                            <th>New Mail Id</th>
                                                            <th>Photo Attachment</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <!-- Reject Tab -->
                                        <div class="tab-pane fade" id="reject" role="tabpanel"
                                            aria-labelledby="reject-tab">
                                            <div class="col col-12 text-end mt-3">
                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--primary t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_cls_rqst_mulsel_fn"
                                                    data-success="Request Closed Successfully" id="closeRequest"
                                                    type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-arrow-circle-o-right fa-anim-flash"></i>
                                                    Close Request
                                                </button>

                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--warning t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_back_to_rpt_mulsel_fn"
                                                    data-success="Report Status Changed Successfully"
                                                    id="backToReportBtn" type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-arrow-circle-o-left fa-anim-flash"></i>Back
                                                    To
                                                    Report
                                                </button>
                                                <button
                                                    class="action-btn t-Button t-Button--icon t-Button--large t-Button--success t-Button--iconLeft t-Button--hot"
                                                    data-function="upt_change_operator_mulsel_fn"
                                                    data-success="Approved Successfully" id="approveReportBtn"
                                                    type="button">
                                                    <i
                                                        class="t-Icon t-Icon--left fa fa-thumbs-o-up fa-anim-flash"></i>Approve
                                                    Report
                                                </button>

                                            </div>
                                            <div class="table-responsive mt-3">
                                                <table id="rejectReport" class="display" style="width:100%">
                                                    <thead>
                                                        <tr>
                                                            <th><input type="checkbox"
                                                                    id="pressReleaseTable_select_all"></th>
                                                            <th>Created Date</th>
                                                            <th>District</th>
                                                            <th>ESevai Id</th>
                                                            <th>Current Operator Name</th>
                                                            <th>Current Operator Mobile Number</th>
                                                            <th>Current Mail Id</th>
                                                            <th>Reason for Operator Change</th>
                                                            <th>New Operator Name</th>
                                                            <th>New Operator Aadhar Number</th>
                                                            <th>New Operator Phone number</th>
                                                            <th>New Mail Id</th>
                                                            <th>Photo Attachment</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="t-Body-contentInner"></div>
                    </main>
                    <footer class="t-Footer" id="t_Footer" role="contentinfo">
                        <div class="t-Footer-body">
                            <div class="t-Footer-content"></div>
                            <div class="t-Footer-apex">
                                <div class="t-Footer-version"> </div>
                                <div class="t-Footer-customize"></div>
                            </div>
                        </div>
                        <div class="t-Footer-top">
                            <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page"
                                aria-label="Start of page"><span class="a-Icon icon-up-chevron"
                                    aria-hidden="true"></span></a>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
        <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>
        <input type="hidden" id="pPageFormRegionChecksums"
            value="&#x5B;&#x7B;&#x22;r&#x22;&#x3A;&#x22;26395036630353245&#x22;,&#x22;c&#x22;&#x3A;&#x22;jc_drQuLCSD7OQ4SoCYvCDg3gmi0saNrAxNVcaIYhK4kUGzGXRSZCbnUHYKvKKFM7nh4lScFeBIQYcexfPhtFQ&#x22;&#x7D;&#x5D;">
        <input type="hidden" id="pPageItemsRowVersion" value="" /><input type="hidden" id="pPageItemsProtected"
            value="UDhfUkVRVUVTVF9OVU1CRVI6UDhfUkVRX1NUQVRVUzpQOF9SRVFVRVNUX0NSRUFU.,RUQ6UDhfUkVRVUVTVEVEX0JZOlA4X1JFUVVFU1RFRF9ESVNUUklDVDpQOF9SRVFV.,RVNURURfR1JPVVA6UDhfUFJJT1JJVFk6UDhfSEVMUERFU0tfVVBMT0FEXzE&#x2F;cSJ1ArMm-nut7TI5BBAN_quH7ZUrg5XWSLGTs8zRd4SWBs1gsgGQlWWzHjlL5L5AOt4RfMahv0kmF1CsWpyLUQ" />
    </form>


    <!-- jQuery -->
    <script src="../assets/js/jquery-3.6.0.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="../assets/js/widget.treeView.min.js"></script>
    <script type="module" src="../assets/js/commonMenu.js"></script>
    <script src="../assets/js/widget.interactiveReport.min.js"></script>
    <script src="../assets/js/widget.iconList.min.js"></script>
    <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
    <script src="../assets/js/widget.stickyWidget.min.js"></script>
    <script src="../assets/js/item.Colorpicker.min.js"></script>
    <script src="../assets/js/jetCommonBundle.min.js"></script>
    <script src="../assets/js/chartBundle.min.js"></script>

    <script src="../assets/js/toastUtil.js"></script>
    <script type="module" src="../assets/js/dataTableWithSelection.js"></script>
    <script src="../assets/js/crypto-js.min.js"></script>
    <script src="../assets/js/theme42.min.js"></script>



    <!-- <script src="../assets/js/desktop_all.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/aos.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script type="module" src="../assets/js/commonMenu.js"></script> -->
    <!-- <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script> -->
    <script src="../assets/js/global.js"></script>
    <script src="../assets/js/encrypt_decrypt.js"></script>
    <script src="../assets/js/globalHeader.js"></script>
    <script src="../assets/js/downloadLink.js"></script>
    <script>
        $(document).ready(function () {
            console.log('jQuery loaded?', typeof jQuery !== 'undefined');
            console.log('DataTable loaded?', typeof $.fn.DataTable !== 'undefined'); // should be true

            $('#pressReleaseTable').DataTable();
        });
    </script>

    <script>
        console.log("✅ DataTables loaded?", typeof $.fn.DataTable); 
    </script>
    <script>
        $('#t_Button_navControl').on('click', function () {
            $('#t_Body_nav').toggle();
        });

    </script>

    <script type="module">
        import { encryptData } from '../assets/js/encrypt_decrypt.js';
        let dataTableRef;
        $(document).ready(function () {
            debugger

            var userId = localStorage.getItem('userId');
            const langSwitch = 'en';
            const apiUrl = "https://tngis.tnega.org/lcap_api/edm/v1/commonfunction";
            const secretKey = 'V7gN4dY8pT2xB3kRz';


            const payload = {
                action: "function_call",
                function_name: "edm_esevai_operator_change_request_edmall_fn",
                params: {
                    status: 'Y',
                    userid: null,
                }
            }
            // const encryptedPayload = CryptoJS.AES.encrypt(JSON.stringify(payload), secretKey).toString();//check

            loadTableWithSelection({
                tableId: 'pressReleaseTable',
                apiUrl,
                httpMethod: 'POST',
                payload: encryptData(payload),
                rowBuilder: (item) => {
                    const applicationInfo = btoa(String(item.request_number));
                    const status = btoa(String(item.request_status));
                    return `
     
        <td class="u-tC">${item.created_date || 'N/A'}</td>
        <td class="u-tC">${item.district || 'N/A'}</td>
        <td class="u-tC">${item.esevai_id || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_mobile_number || 'N/A'}</td>
        <td class="u-tC">${item.current_mail_id || 'N/A'}</td>
        <td class="u-tC">${item.reason_for_operator_change || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_aadhar_number || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_phone_number || 'N/A'}</td>
        <td class="u-tC">${item.new_mail_id || 'N/A'}</td>
         <td>${createDownloadLink(item.photo_attachment, item.mime_type, item.file_name)}</td>

    
    `;
                },
                onTableInit: function (dtRef) {
                    dataTableRef = dtRef;
                },
                onSelectionChange: function (selectedRows) {
                    console.log("✅ Selected Rows:", selectedRows);
                }
            });


            $(document).on('click', '.closed_tab_class', function () {
                debugger

                const closedpayload = {
                    action: "function_call",
                    // function_name: "edm_esevai_operator_change_request_edmall_fn",
                    // params: {
                    //     status: 'R',
                    //     userid: null,
                    // }
                    function_name: "edm_esevai_operator_change_request_edmall_fn",
                    params: {
                        status: 'A',
                        userid: null,
                    }
                }
                // const encryptedPayload = CryptoJS.AES.encrypt(JSON.stringify(payload), secretKey).toString();//check

                loadTableWithSelection({
                    tableId: 'closedReport',
                    apiUrl,
                    httpMethod: 'POST',
                    payload: encryptData(closedpayload),
                    rowBuilder: (item) => {
                        const applicationInfo = btoa(String(item.request_number));
                        const status = btoa(String(item.request_status));
                        return `
      
         <td class="u-tC">${item.created_date || 'N/A'}</td>
        <td class="u-tC">${item.district || 'N/A'}</td>
        <td class="u-tC">${item.esevai_id || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_mobile_number || 'N/A'}</td>
        <td class="u-tC">${item.current_mail_id || 'N/A'}</td>
        <td class="u-tC">${item.reason_for_operator_change || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_aadhar_number || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_phone_number || 'N/A'}</td>
        <td class="u-tC">${item.new_mail_id || 'N/A'}</td>
         <td>${createDownloadLink(item.photo_attachment, item.mime_type, item.file_name)}</td>
      
    `;
                    },
                    onTableInit: function (dtRef) {
                        dataTableRef = dtRef;
                    },
                    onSelectionChange: function (selectedRows) {
                        console.log("✅ Selected Rows:", selectedRows);
                    }
                });


                $('#closed-tab').removeClass('closed_tab_class');
            })


            $(document).on('click', '.reject_tab_class', function () {
                debugger

                const closedpayload = {
                    action: "function_call",
                    // function_name: "edm_esevai_operator_change_request_edmall_fn",
                    // params: {
                    //     status: 'R',
                    //     userid: null,
                    // }
                    function_name: "edm_esevai_operator_change_request_edmall_fn",
                    params: {
                        status: 'N',
                        userid: null,
                    }
                }
                // const encryptedPayload = CryptoJS.AES.encrypt(JSON.stringify(payload), secretKey).toString();//check

                loadTableWithSelection({
                    tableId: 'rejectReport',
                    apiUrl,
                    httpMethod: 'POST',
                    payload: encryptData(closedpayload),
                    rowBuilder: (item) => {
                        const applicationInfo = btoa(String(item.request_number));
                        const status = btoa(String(item.request_status));
                        return `

         <td class="u-tC">${item.created_date || 'N/A'}</td>
        <td class="u-tC">${item.district || 'N/A'}</td>
        <td class="u-tC">${item.esevai_id || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.current_operator_mobile_number || 'N/A'}</td>
        <td class="u-tC">${item.current_mail_id || 'N/A'}</td>
        <td class="u-tC">${item.reason_for_operator_change || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_name || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_aadhar_number || 'N/A'}</td>
        <td class="u-tC">${item.new_operator_phone_number || 'N/A'}</td>
        <td class="u-tC">${item.new_mail_id || 'N/A'}</td>
         <td>${createDownloadLink(item.photo_attachment, item.mime_type, item.file_name)}</td>
  
    `;
                    },
                    onTableInit: function (dtRef) {
                        dataTableRef = dtRef;
                    },
                    onSelectionChange: function (selectedRows) {
                        console.log("✅ Selected Rows:", selectedRows);
                    }
                });


                $('#reject-tab').removeClass('reject_tab_class');
            })

            $('.action-btn').on('click', function (event) {
                event.preventDefault();
                debugger;

                const button = $(this);
                const functionName = button.data('function');
                const successMessage = button.data('success');

                if (typeof window.getSelectedRows !== 'function') {
                    alert("Selection logic is not initialized.");
                    return;
                }

                const selectedRows = window.getSelectedRows();
                console.log("🔍 Selected Rows:", selectedRows);

                const requestNumbers = selectedRows
                    .map(row => row.id)
                    .filter(Boolean);

                if (requestNumbers.length === 0) {
                    alert("Please select at least 1 request");
                    return;
                }

                const requestNumbersString = requestNumbers.join('|');
                console.log("🧾 Final ID string:", requestNumbersString);



                const payload = {
                    action: "function_call",
                    function_name: functionName,
                    params: {
                        p_com_id: requestNumbersString,
                        p_user_id: userId
                    }
                };

                console.log("✅ Final Payload:", payload);

                $.ajax({
                    url: apiUrl,
                    type: 'POST',
                    data: { data: encryptData(payload) },
                    success: function (response) {
                        showSuccessToast(successMessage);
                        $('input[type="checkbox"]:checked').prop('checked', false);
                        button.prop('disabled', true);
                        setTimeout(() => location.reload(), 1000);
                    },
                    error: function () {
                        showErrorToast("An error occurred during the operation.");
                    }
                });
            });


        });

    </script>
</body>

</html>