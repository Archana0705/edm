<!DOCTYPE html>
<html class="no-js  page-9999 app-E-DISTRICT-MANAGER-APPLICATION" lang="en">

<head>
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta charset="utf-8">
  <title>e-District Manager Application - Log In</title>
  <link rel="stylesheet" href="../assets/css/oj-redwood-notag-min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Core-theme.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/commonMenu.css" type="text/css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/datatable/css/dataTables.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/vendor/datatable/dataTables.bootstrap5.min.css">
  <link href="../assets/vendor/toastr/toastr.min.css" rel="stylesheet">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="-1" />
  <meta http-equiv="Cache-Control" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

</head>

<!-- Hello -->

<body
  class="t-PageBody--login t-PageTemplate--login no-anim   apex-side-nav apex-icons-fontapex apex-theme-vita-copy-1">
  <img data-aos="zoom-out" data-aos-duration="1200" src="assets/img/edmbg.svg" id="edm-bg">
  <form role="none" action="wwv_flow.accept?p_context=e-district-manager-application/login/101362951000433"
    method="post" name="wwv_flow" id="wwvFlowForm" data-oj-binding-provider="none" novalidate autocomplete="off">
    <input type="hidden" name="p_flow_id" value="1111" id="pFlowId" /><input type="hidden" name="p_flow_step_id"
      value="9999" id="pFlowStepId" /><input type="hidden" name="p_instance" value="101362951000433"
      id="pInstance" /><input type="hidden" name="p_page_submission_id"
      value="MTYzOTQ4NzI3MTI1OTI0NjQ1NzUyNTM1MzM0MTk4MjQwMjU1NjUz&#x2F;Q6oaVTU_V6dojr7gtWTLQQMI-NBIK9sZD_gFntAepAUK0Q9leerOnf_qytzSjLpUGjsxDi_kMCL-kjHm6bQTYA"
      id="pPageSubmissionId" /><input type="hidden" name="p_request" value="" id="pRequest" /><input type="hidden"
      name="p_reload_on_submit" value="S" id="pReloadOnSubmit" /><input type="hidden"
      value="e-district-manager-application&#x2F;login&#x2F;101362951000433" id="pContext" /><input type="hidden"
      value="163948727125924645752535334198240255653" id="pSalt" />
    <div class="t-Login-bg">
      <div class="t-Login-bgImg"></div>
    </div>
    <div class="t-Login-container">
      <header class="t-Login-containerHeader"></header>
      <main class="t-Login-containerBody" id="main">
        <span id="APEX_SUCCESS_MESSAGE" data-template-id="14170695380470913_S"
          class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE" data-template-id="14170695380470913_E"
          class="apex-page-error u-hidden"></span>
        <div class="container container-fluid">
          <div class="row pad big-title">
            <div class="col col-12 apex-col-auto col-start col-end">
              <h1 data-aos="fade-right" data-aos-duration="600"><span class="edistrict">Welcome! </span>to eDistrict
                Manager Portal</h1>
            </div>
          </div>
          <div class="row pad">
            <div class="col col-6 apex-col-auto col-start">
              <img data-aos="zoom-in" data-aos-duration="800" data-aos-delay="400" src="assets/img/edm-illustration.svg"
                id="edm-illustration">
            </div>
            <div class="col col-6 apex-col-auto col-end">
              <div class="t-Login-region t-Form--stretchInputs t-Form--labelsAbove " id="R8796712810964397"
                role="region" aria-labelledby="R8796712810964397_heading">
                <div class="t-Login-header text-middle">
                  <!--  --><img class="login-logo" data-aos="flip-down" data-aos-duration="1200"
                    src="assets/img//logo.svg">
                  <!-- <span class="t-Login-logo " aria-hidden="true"> </span> -->
                  <h2 class="t-Login-title" data-aos="zoom-in" data-aos-duration="600" id="R8796712810964397_heading"
                    data-apex-heading>
                    <!-- e-District Manager Application -->
                    Login
                  </h2>
                </div>
                <div class="t-Login-body" data-aos="zoom-out" data-aos-duration="600">
                  <div
                    class="t-Form-fieldContainer t-Form-fieldContainer--hiddenLabel rel-col  apex-item-wrapper apex-item-wrapper--has-placeholder apex-item-wrapper--text-field apex-item-wrapper--has-icon"
                    id="P9999_USERNAME_CONTAINER">
                    <div class="t-Form-labelContainer t-Form-labelContainer--hiddenLabel col col-null">
                      <label for="P9999_USERNAME" id="P9999_USERNAME_LABEL"
                        class="t-Form-label u-VisuallyHidden">Username</label>
                    </div>
                    <div class="t-Form-inputContainer col col-null">
                      <div class="t-Form-itemWrapper"><input type="text" id="P9999_USERNAME" name="P9999_USERNAME"
                          placeholder="Please&#x20;Enter&#x20;your&#x20;registered&#x20;Mobile&#x20;Number"
                          class="text_field&#x20;apex-item-text&#x20;apex-item-has-icon" autocomplete="username"
                          value="" size="40" maxlength="100" data-trim-spaces="NONE" /><span
                          class="apex-item-icon fa&#x20;fa-user" aria-hidden="true"></span></div>
                      <span id="P9999_USERNAME_error_placeholder" class="a-Form-error"
                        data-template-id="8676527400964195_ET"></span>
                    </div>
                  </div>
                  <div
                    class="t-Form-fieldContainer t-Form-fieldContainer--hiddenLabel rel-col  apex-item-wrapper apex-item-wrapper--has-placeholder apex-item-wrapper--password apex-item-wrapper--has-icon"
                    id="P9999_PASSWORD_CONTAINER">
                    <div class="t-Form-labelContainer t-Form-labelContainer--hiddenLabel col col-null">
                      <label for="P9999_PASSWORD" id="P9999_PASSWORD_LABEL"
                        class="t-Form-label u-VisuallyHidden">Password</label>
                    </div>
                    <div class="t-Form-inputContainer col col-null">
                      <div class="t-Form-itemWrapper"><input type="password" name="P9999_PASSWORD" size="40"
                          maxlength="100" value="" id="P9999_PASSWORD" placeholder="Password"
                          class="password&#x20;apex-item-text&#x20;apex-item-has-icon" autocomplete="current-password"
                          onkeypress="return apex.submit({request:'P9999_PASSWORD',submitIfEnter:event})" /><span
                          class="apex-item-icon fa&#x20;fa-key" aria-hidden="true"></span></div>
                      <span id="P9999_PASSWORD_error_placeholder" class="a-Form-error"
                        data-template-id="8676527400964195_ET"></span>
                    </div>
                  </div>
                </div>
                <div class="t-Login-buttons" data-aos="fade-up" data-aos-duration="800"><button
                    class="t-Button t-Button--hot btns&#x20;&#x20;t-Button--success" type="button"><span
                      class="t-Button-label">Sign In</span></button><button
                    class="t-Button t-Button--hot btns&#x20;&#x20;t-Button--primary&#x20;t-Button--link" type="button"
                    id="B19450819038438704"><span data-bs-toggle="modal" data-bs-target=".forgetModal"
                      class="t-Button-label">Forget Password</span></button></div>
                <div class="t-Login-links"></div>
                <div class="t-Login-subRegions"></div>
              </div>
            </div>
          </div>
        </div>
      </main>
      <footer class="t-Login-containerFooter"></footer>
    </div>
    <input type="hidden" id="pPageFormRegionChecksums" value="&#x5B;&#x5D;">
    <input type="hidden" id="pPageItemsRowVersion" value="" /><input type="hidden" id="pPageItemsProtected"
      value="&#x2F;GOUJy6D7rNqk2kAeJH8kC4TrRUzFgFuGhG1C6LTnHEkIlEdDu2WE3JCKiSwK57S06t673Rw0oexMvQgv2Ih0OA" />
  </form>
  <div class="modal fade forgetModal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Forget Password</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="rowform">
            <div class="row ">
              <div class="col col-10  col-start">
                <div
                  class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--text-field"
                  id="P21_MOBILE_CONTAINER">
                  <div class="t-Form-labelContainer col col-2">
                    <label for="P21_MOBILE" id="P21_MOBILE_LABEL" class="t-Form-label">Mobile Number </label>
                  </div>
                  <div class="t-Form-inputContainer col col-8">
                    <div class="t-Form-itemWrapper"><input type="text" id="P21_MOBILE" name="P21_MOBILE"
                        class="text_field apex-item-text" value="" size="30" data-enter-submit="false"
                        data-is-page-item-type="true">
                    </div>
                    <div class="t-Form-itemAssistance">
                      <span id="P21_MOBILE_error_placeholder" class="a-Form-error"
                        data-template-id="8676937166964195_ET"></span>
                      <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="col col-10  col-start">
                <div
                  class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--text-field"
                  id="P21_EMAIL_CONTAINER">
                  <div class="t-Form-labelContainer col col-2">
                    <label for="P21_EMAIL" id="P21_EMAIL_LABEL" class="t-Form-label">Email Id </label>
                  </div>
                  <div class="t-Form-inputContainer col col-8">
                    <div class="t-Form-itemWrapper"><input type="email" id="P21_EMAIL" name="P21_EMAIL"
                        class="text_field apex-item-text" value="" size="30" data-text-case="LOWER"
                        data-enter-submit="false" data-is-page-item-type="true">
                    </div>
                    <div class="t-Form-itemAssistance">
                      <span id="P21_EMAIL_error_placeholder" class="a-Form-error"
                        data-template-id="8676937166964195_ET"></span>
                      <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="col col-10  col-start">
                <div
                  class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--password"
                  id="P21_NEW_PASSWORD_CONTAINER">
                  <div class="t-Form-labelContainer col col-2">
                    <label for="P21_NEW_PASSWORD" id="P21_NEW_PASSWORD_LABEL" class="t-Form-label">New Password </label>
                  </div>
                  <div class="t-Form-inputContainer col col-8">
                    <div class="t-Form-itemWrapper"><input type="password" name="P21_NEW_PASSWORD" size="30"
                        maxlength="" value="" id="P21_NEW_PASSWORD" class="password apex-item-text apex-item-password"
                        data-enter-submit="true">
                    </div>
                    <div class="t-Form-itemAssistance">
                      <span id="P21_NEW_PASSWORD_error_placeholder" class="a-Form-error"
                        data-template-id="8676937166964195_ET"></span>
                      <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="col col-10  col-start">
                <div
                  class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--password"
                  id="P21_CONFIRM_PASSWORD_CONTAINER">
                  <div class="t-Form-labelContainer col col-2">
                    <label for="P21_CONFIRM_PASSWORD" id="P21_CONFIRM_PASSWORD_LABEL" class="t-Form-label">Confirm
                      Password </label>
                  </div>
                  <div class="t-Form-inputContainer col col-8">
                    <div class="t-Form-itemWrapper"><input type="password" name="P21_CONFIRM_PASSWORD" size="30"
                        maxlength="" value="" id="P21_CONFIRM_PASSWORD"
                        class="password apex-item-text apex-item-password" data-enter-submit="true">
                    </div>
                    <div class="t-Form-itemAssistance">
                      <span id="P21_CONFIRM_PASSWORD_error_placeholder" class="a-Form-error"
                        data-template-id="8676937166964195_ET"></span>
                      <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Change Password</button>
          <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
        </div>
      </div>
    </div>
  </div>
  <script>
    var apex_img_dir = "\u002Fi\u002F24.1.4\u002F";
    var apex = {
      env: { APP_USER: "nobody", APP_ID: "1111", APP_PAGE_ID: "9999", APP_SESSION: "101362951000433", APP_FILES: "r\u002Fedmdev\u002F1111\u002Ffiles\u002Fstatic\u002Fv1087\u002F", WORKSPACE_FILES: "r\u002Fedmdev\u002Ffiles\u002Fstatic\u002Fv1\u002F", APEX_VERSION: "24.1.4", APEX_BASE_VERSION: "24.1" },
      libVersions: { cropperJs: "1.6.1", domPurify: "3.1.2", fontapex: "2.3", fullcalendar: "6.1.11", hammer: "2.0.8", jquery: "3.6.4", jqueryUi: "1.13.2", maplibre: "4.0.1", markedJs: "12.0.1", prismJs: "1.29.0", oraclejet: "16.0.10", tinymce: "6.8.4", turndown: "7.1.3", monacoEditor: "0.47.0", lessJs: "4.2.0" }
    };
  </script>
  <!-- <script src="assets/js/crypto-js.min.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/global.js"></script>
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/desktop_all.min.js"></script>
  <script src="assets/js/theme42.min.js"></script>
  <script src="assets/js/aos.js"></script>
  <script src="assets/js/chart.js"></script>
  <script src="assets/js/add.min.js"></script>
  <script src="assets/js/widget.treeView.min.js"></script>
  <script src="assets/js/widget.interactiveReport.min.js"></script>
  <script src="assets/js/widget.iconList.min.js"></script>
  <script src="assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="assets/js/widget.stickyWidget.min.js"></script>
  <script src="assets/js/item.Colorpicker.min.js"></script>
  <script src="assets/js/require.js"></script>
  <script src="assets/js/requirejs.jetConfig.min.js"></script>
  <script src="assets/js/jetCommonBundle.min.js"></script>
  <script src="assets/js/chartBundle.min.js"></script> -->
  <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div><input type="hidden" id="pPageFormRegionChecksums"
    value="&#x5B;&#x5D;">
  <input type="hidden" id="pPageItemsRowVersion" value="" /><input type="hidden" id="pPageItemsProtected"
    value="&#x2F;9EQChVRgJR6e4yj2ry-mxwnLeN9TV-kHySzPtwpEcIDCApdsbgtxdXlYJ2QdqQWhgYFXF8wZXHwXgwLUlvUpLw" />

  </form>



  <!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/toastUtil.js"></script>
  <script src="../assets/js/dataTableUtil.js"></script>
  <script src="../assets/js/desktop_all.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/aos.js"></script>

  <script src="../assets/js/crypto-js.min.js"></script>
  <script type="module" src="../assets/js/commonMenu.js"></script>
  <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>
  <script src="../assets/js/global.js"></script> -->

  <!-- <script>
    window.addEventListener('DOMContentLoaded', function () {
      debugger
      loadToastLayout(() => {
        showSuccessToast("Hello! Toast is working!");
      });
    });
  </script> -->
  <!-- <script nonce="3LvgEVni8AP-QAvCYx16JA">
    apex.session.initTimeouts(180, { "idle_time_ms": 3586000, "life_time_ms": 24899000, "max_idle_time_ms": 3600000 }, '\u002Fords\u002Fr\u002Fedmdev\u002Fe-district-manager-application\u002Fhome', '\u002Fords\u002Fr\u002Fedmdev\u002Fe-district-manager-application\u002Fhome');
    apex.jQuery(function () {
      apex.page.init(this, function () {
        try {
          (function () { apex.jQuery('body').addClass('t-PageBody--leftNav'); })();
          (function () { apex.widget.selectList("#P19_STATUS", { "nullValue": "", "ajaxIdentifier": "SVRFTSBUWVBFfjUxMjB-NTgzNDEzMzQ2ODEzNTQ1MzY\u002FBSFdthAX6LWf_lbC8sSetgYxaKa13aEQ1StbOqHB6Cwqj_R3CRJ0wEU0ou3GbM7uU4DgN65BNob00NqzNkKPWQ" }); })();
          (function () { apex.jQuery('#td\u005C.u\u002DtC_ir').interactiveReport({ "regionId": "td.u-tC", "rowsPerPage": false, "currentRowsPerPage": 10, "reset": false, "help": false, "subscription": false, "lazyLoading": false, "ajaxIdentifier": "UkVHSU9OIFRZUEV-fjU4MjQ3ODAxMDMwODYwMDY2\u002FVREcsf6iSVDC_CQ5Qw98h0WEtZ3ooirrYX8k3QC8MUhVMr5wAiiJwcXpAZTgPfxx-BPqu4H2qh3qXuRzmsxvSQ" }); })();
        } catch (e) { apex.debug.error(e) };
        apex.item.waitForDelayLoadItems().done(function () {
          try {
            (function () {
              apex.da.initDaEventList();
              apex.da.init();
            })();
            apex.theme42.initializePage.noSideCol();
            var anchorElements = document.querySelectorAll('td.u-tC[headers=DOWNLOAD-BLOB] a');

            Array.from(anchorElements).forEach(function (elem) {
              elem.setAttribute('target', '_blank');
            })
            apex.page.warnOnUnsavedChanges();
          } finally {
            apex.event.trigger(apex.gPageContext$, 'apexreadyend');
          };
        });
      });
    }); apex.pwa.init({ serviceWorkerPath: '\u002Fords\u002Fr\u002Fedmdev\u002Fe-district-manager-application\u002Fsw.js?v=24.2.0-39529515031887\u0026lang=en' });
  </script> -->

  <!-- jQuery -->
  <script src="../assets/js/jquery-3.6.0.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="../assets/js/widget.treeView.min.js"></script>
  <script type="module" src="../assets/js/commonMenu.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>

  <script src="../assets/js/toastUtil.js"></script>
  <script src="../assets/js/dataTableUtil.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>



  <!-- <script src="../assets/js/desktop_all.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/aos.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script type="module" src="../assets/js/commonMenu.js"></script> -->
  <!-- <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script> -->
  <script src="../assets/js/global.js"></script>
  <script src="../assets/js/encrypt_decrypt.js"></script>
  <script>
    $(document).ready(function () {
      console.log('jQuery loaded?', typeof jQuery !== 'undefined');
      console.log('DataTable loaded?', typeof $.fn.DataTable !== 'undefined'); // should be true

      $('#pressReleaseTable').DataTable();
    });
  </script>

  <script>
    console.log("✅ DataTables loaded?", typeof $.fn.DataTable); 
  </script>

  <script>
    AOS.init();
  </script>

</body>

<!-- <script type="module">
  import { initializeUserSession } from './assets/js/auth.js';
  document.addEventListener('DOMContentLoaded', function () {
    debugger

    const signInButton = document.querySelector('.t-Button--success');

    if (signInButton) {
      signInButton.addEventListener('click', async function () {
        const mobInput = document.getElementById('P9999_USERNAME');
        const passInput = document.getElementById('P9999_PASSWORD');

        const mobnumber = mobInput?.value?.trim();
        const password = passInput?.value?.trim();

        console.log("mobnumber", mobnumber)

        if (!mobnumber || mobnumber.length !== 10 || isNaN(mobnumber)) {
          alert("Please enter a valid 10-digit mobile number.");
          return;
        }
        if (!password) {
          alert("Please enter your password.");
          return;
        }

        await initializeUserSession(mobnumber, password);

        // Optional: Redirect to role-based dashboard
        const role = window.userSession?.role || 'edistrict_manager';
        window.location.href = `${role}/dashboard.html`;
      });
    }
  });
</script> -->
<script type="module">
  import { initializeUserSession } from './assets/js/auth.js';

  document.addEventListener('DOMContentLoaded', () => {
    const signInButton = document.querySelector('.t-Button--success');
    const debugConsole = document.getElementById('debug-console'); // Add this <div>

    if (!signInButton) {
      console.error("Sign-in button not found!");
      return;
    }

    signInButton.addEventListener('click', async (e) => {
      e.preventDefault();

      const mobInput = document.getElementById('P9999_USERNAME');
      const passInput = document.getElementById('P9999_PASSWORD');
      const mobnumber = mobInput?.value?.trim();
      const password = passInput?.value?.trim();

      // Validation
      if (!mobnumber || mobnumber.length !== 10 || isNaN(mobnumber)) {
        alert("Please enter a valid 10-digit mobile number.");
        return;
      }
      if (!password) {
        alert("Please enter your password.");
        return;
      }

      // UI Feedback
      signInButton.disabled = true;
      signInButton.innerHTML = '<span class="fa fa-spinner fa-spin"></span> Signing in...';

      try {
        await initializeUserSession(mobnumber, password);
        const role = localStorage.getItem('userRole');
        console.log("roleeeee", role);

        let folder = '';

        if (role.toLowerCase().includes('helpdesk_operator')) {
          folder = 'helpdesk_operator';
        } else if (role.toLowerCase().includes('edistrict manager')) {
          folder = 'edistrict_manager';
        } else if (role.toLowerCase().includes('helpdesk')) {
          folder = 'helpdesk';
        } else {
          throw new Error('Unknown role: ' + role);
        }

        window.location.href = `${folder}/dashboard.html`;
      } catch (error) {
        console.error("Login Error:", error);
        alert("Login failed. Check console for details.");
      } finally {
        signInButton.disabled = false;
        signInButton.innerHTML = 'Sign In';
      }
    });
  });
</script>

</html>